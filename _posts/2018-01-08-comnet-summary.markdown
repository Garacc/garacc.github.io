---
layout:     post
title:      "ComNet Summary"
subtitle:   "ZJU, ISEE, ComNet, Final Review"
date:       2018-01-08
author:     "Garacc"
header-img: "img/post-bg-unix-linux.jpg"
tags:
    - ComNet
    - Course
---


## Chapter 1 绪论
---

- 通信网络概况
	- 通信发展史： 语言→文字→印刷→电报→电话→现代通信
	- 通信网络简介
	- 网络发展趋势： 业务数据化，技术分组化，光纤化，无线化
	- 未来网络特点： 网络和业务易购融合
- 通信网络发展中的主要因素 

## Chapter 2 网络服务
---

- 范例：邮政系统
- 应用
- 网络服务
- 网络元素
- 网络机制

### 2.1 应用

**网络功能**：信息传输，信息交换的途径是**应用**  

**信息的特性**：多样性，有向性，具有一定的形式  

**数字化趋势**：信息流逐渐变为比特流——衡量方式：通信量/业务量(即通信速率)

### 2.2 网络服务

**面向连接服务**：

- 特点：有序，同路径  
- 三个阶段：建立连接，数据传送，拆除连接  
- 服务质量：误码率，优先级，时延，时延抖动，分组丢失率  

**无连接服务**：

- 特点：可能无序，单独传送  
- 服务质量：优先级，平均时延，最大时延，错误处理  

### 2.3 网络元素

**链路/Link**：单向数据传输通路  

**中继器/Repeater**：物理层使用，路径中的信号放大器  

**集线器/HUB**：物理层，放大信号，直连近距离的若干设备成为一个小的子网  
可以理解为用网线粗暴的插在一起，除此之外什么功能都实现不了  

**网桥/Bridge**：数据链路层，将两个子网连接在一起，按MAC地址转发帧  
基本工作模式为接收-存储-地址过滤-转发  
相比HUB可以根据MAC地址进行过滤了，可以分隔不同网络的广播信息，防盗门具有隔音功能了  

**路由器/Router**：网络层，基于网络协议在不同网络之间传递数据包，为数据流提供端到端的路由  
相比Bridge体量更大(不局限于1+1，可以把好多个子网加在一起)，包容性更强(支持多种底层协议802.3/11/blabla)，用逻辑地址(一般是IP地址)自由度更高
  
**交换机/Switch**：好多种，有二层的有三层的，和Router有一点区别，详细区分请移步[这里](https://www.zhihu.com/question/20465477)  

**混合物桥路器/Brouter**：听起来很厉害但接触不到的东西  

**网关/GateWay**：网络层防盗门，很多钥匙(高层协议)都能开，隔音性能很好的那种

### 2.4 网络机制

*这里就是名词很多，我就随便列一列，表明一下一个组网里需要考虑这些问题*  

- 复用/Multiplexing & 多址接入/Multi-access
- 交换/Switching & 路由/Routing [*你看这里都一起写，网络元素里非要仔细区分，感觉除了纠结概念实际上没什么必要划的那么清*]
- 差错控制/Error control
- 流量控制/Flow control 
- 拥塞控制/Congest control
- 资源分配/Resource allocation [带宽，功率，存储器，处理器]
- 服务质量(用户体验质量)/QoS(QoE)
- 安全性/Security

### 思考题

1. 应用、业务、基本网络元素与基本网络机制在通信网络中的“位置”，他们是如何相互联系在一起的？
  
	- 应用位于网络最高层，直接对用户提供服务
	- 业务位于网络中层，分为面向连接和无连接两类，为应用提供服务
	- 基本网络元素位于网络底层，是承载业务、执行物理传输的设备
	- 基本网络机制贯穿网络各层，负责网络资源分配、控制、安全保证等各项技术

2. 路由器一节中，请分析用户1.1向用户2.1发送数据时，路由器的工作原理。

	- 第一步：用户1.1发送数据，路由器隶属于子网1的端口1.8接收到数据
	- 第二步：路由器确认数据包的目标IP地址2.1，确定目标用户隶属于子网2，并从子网2的端口2.5发送数据
	- 第三步：用户2.1接收到路由器发出的数据，IP地址匹配后接收数据

3. 什么是二层交换机与三层交换机？他们各自的核心技术是什么？交换机与路由器的异同？[\*好吧前面吐槽这么久思考题找回来了\*]

	- 二层交换机：连接多个子网，按MAC地址转发帧的数据链路层设备。
	- 二层核心技术：根据源和目的节点的MAC地址，可用硬件快速实现存储、过滤和转发帧功能。
	- 三层交换机：具备路由功能，并能以二层交换机技术转发数据的网络层设备。
	- 三层核心技术：一次路由，多次转发。即可以调用路由功能建立完整的IP和MAC的映射(一次路由)，再使用二层交换技术完成转发(多次转发)。
	- 二层交换机与路由器的异同：两者都是连接子网、实现数据转发的设备。二层交换机工作于数据链路层，仅凭MAC地址无法隔离广播域；路由器工作于网络层，能靠IP地址隔离广播域。
	- 三层交换机与路由器的异同：两者都能连接采用不同路由协议的子网，选择路由路径并转发数据。三层交换机兼具路由器的功能和二层交换技术，可以以低成本更灵活地连接拓扑、分配子网带宽和配置信息资源。

## Chapter 3 网络分层结构
---

- 网络分层结构
- OSI分层结构
- TCP/IP分层结构
- ODN结构
- 基于跨层设计的网络体系结构

### 3.1 网络分层结构

**模块/Module**：通过执行某个功能支持系统的功能操作

模块通常设计为黑盒子。模块化的思路可以简化设计，提高网络可理解性，同时设计是标准化，可互换，广泛有效的。  

**层次**：不多说，上图

![](https://garacc.github.io/img/comnet_summary/layer.png)

**分层的原因及好处**：
  
- 按功能分层，每层独立完成一部分功能  
- 每层只与相邻两层交互，下层提供的功能向高层提供服务
- 每层独立，每层采用合适的技术实现，分层独立开发和测试
- 只要接口关系不变，一层发生更改时其它层不受影响

### 3.2 [OSI参考模型](https://baike.baidu.com/item/OSI%E6%A8%A1%E5%9E%8B/10119902?fr=aladdin)

标准的七层模型(从底到顶)：物理层，数据链路层，网络层，传输层，会话层，表示层，应用层

### 3.3 [TCP/IP网络体系结构](https://baike.baidu.com/item/TCP%2FIP%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B/5081378?fr=aladdin)

基于TCP/IP协议组的四层模型(从底到顶)：网络接入层，网际互联层，传输层，应用层

**两个模型(OSI vs TCP/IP)的比较**：

**相同点**：

- 基于独立的协议栈的概念，层的功能大体相似

**不同点**：

- 是否区分服务、接口、协议(OSI区分，TCP/IP不区分)
- 通用性(OSI通用，TCP/IP不通用)
- 通信模式(OSI的通信模式清楚，TCP/IP的通信模式在网络接口层下面模糊)

### 3.4 ODN模型

继续直接上图(*不常用的模型就是容易打入冷宫*)(好吧其实**中间件**的概念还是很重要的)

![](https://garacc.github.io/img/comnet_summary/odn.png)

### 3.5 基于跨层设计的网络体系结构

**为什么要设计跨层体系结构？**

1. 必要性(分层网络中与遇到的瓶颈)：	
	- 安全性
	- 服务质量
	- 移动性
2. 面临的问题：
	- 所有节点 or 部分节点
	- 所有层 or 不分层
	- 协议改进 or 新协议设计
	- 是否需要有协调节点(non-manager or manager, Centralized or Distributed)
3. 挑战与劣势：
	- 跨层设计的共存
		- 接口标准化
		- 采用透明的方式
	- 跨层信号
		- 包头设计
		- ICMP包
		- 额外的跨层信号
	- 通用性
	- 对原有分层网络结构的破坏

### 思考题

1. 从网络性能优化（overall network performance）和业务性能优化（service performance optimization）角度思考跨层设计的优势与挑战？

	- 网络性能优化角度：网络各层的参数存在关联、相互影响，跨层设计可以使网络结构更灵活、简单，网络适应性更强，还使网络控制模块能更全面、准确的了解网络状态，做出使整体的性能达到全局最优的控制决策，避免出现只有某几层局部最优或各层分别控制产生冲突的情况。但跨层设计会使控制机制更复杂、控制开销更大、优化目标(效用函数)难以确定。
	- 业务性能优化角度：网络各层服务最终需要使用户满意。而用户只关心用户体验质量(QoE)，而不在意网络如何提供服务。影响QoE的参数不局限于网络的某一层，因此采用跨层设计，不仅能根据业务特征简化或灵活调整网络结构，还能根据业务约束(约束条件)和网络状态调整网络性能以使用户获得满意的QoE。但跨层设计不仅使控制复杂开销变大，还需要全面了解业务的特征和用户需求的约束。

2. 从通用网络效用最大化问题的垂直分解角度，分析严格分层与跨层设计的优缺点。

- wait for wdz


## Chapter 4 点对点协议
---

- 概述
- DLC的点到点协议
	- 错误检测
	- 自动重发请求
	- HARQ
	- 数据帧
	- DLC标准

- 网络层点对点协议
- 传输层点对点协议

### 4.1 概述

点对点协议中，每当我们将目光集中在某一层时，比这一层低的整个网络将被模拟成一个简单的模型，如：

- 考虑数据链路控制层(DLC层)，底层可以描述为虚拟比特管道；
- 考虑更高层(比DLC更高)，底层可以描述为数据包。

DLC层的主要目标是以数据包到达的**次序，不重复、无错误**地传送数据包。  
DLC层主要通过**前向纠错(FEC)**和**自动重发请求(ARQ)**来实现。

### 4.2 错误检测

主要介绍目前比较成熟的几种错误检测方法。

#### 4.2.1 单奇偶校验

对所有的信号比特求异或，异或结果以1bit的形式负载所有信号比特后面。  
单奇偶校验很简单，但只能检测奇数个错误的情况，同时效率低，而且无法确认错误位置。

#### 4.2.2 水平和垂直奇偶校验

将信号比特排列成矩阵的形式，每行每列分别做异或校验，再在最后对行和列的校验结果做异或校验。  
方块校验(水平和垂直校验的别称)相比单奇偶校验适应性变得更强，但仍无法处理很短的错误脉冲。

#### 4.2.3 奇偶校验编码

基于奇偶校验，但是对信号比特的所有可能组合进行校验编码，需要用于校验的长度往往要大于原信息长度，但可以完全检测出错误。

#### 4.2.4 [循环冗余校验(CRC)](https://baike.baidu.com/item/CRC/1453359)

基于特定搞定多项式，对于数据比特的生成多项式进行求余操作，将余数作为冗余校验码缀在数据后面。  
CRC是目前使用最广泛的校验方式。

![](https://garacc.github.io/img/comnet_summary/crc.png)

### 4.3 [自动重发请求(ARQ)](https://baike.baidu.com/item/ARQ/7402812)

ARQ的目的在于纠错，不同类型的重发协议区别主要体现在重发效率上。常见的重发协议有：

- 走/停式ARQ(确定一个包正确传输再传下一个)
- 返回n帧ARQ(哪个包出错了就倒回去从哪个包重新开始发)
- 选择性重发ARQ(哪个包错了就把哪个包再发一遍)

### 4.4 HARQ

基于之前对错误检测和ARQ的介绍，现在我们引出混合ARQ，即HARQ。  
HARQ将前向纠错和自动重传结合，同时具有纠错与出错重传机制，并通过重传适应信道的动态变化。
HARQ性能改善都是以增加系统复杂性为代价的。

### 4.5 数据帧

![](https://garacc.github.io/img/comnet_summary/dataframe.png)

### 4.6 DLC

HDLC的工作模式：
- 正常应答(NRM, Normal Response Mode)：主-从链路，采用轮询方式
- 异步应答(ARM, Asynchronous Response Mode)：主-从链路，异步信号
- 异步平衡(ABM, Asynchronous Balanced Mode)：全双工点对点链路(每次通信需要建立链路，有一个简单的握手)

标准的DLC结构：

![](https://garacc.github.io/img/comnet_summary/dlc_dataframe.png)

### 4.7 网络层点对点协议

设计网络层点对点协议需要考虑的因素：

- 会话识别与寻址
	- 数据包头中会含有原地址(SA)和目的地址(DA)
	- 虚拟电路(Virtual Circuit)
- 数据包编号
	- 序列号
- 错误恢复
	- 错误恢复的必要性
	- 实现机理
- 流量控制

网络层的两种常用协议： X.25网络层协议[基于虚拟电路]，互联网协议(IP)[基于数据包头以及SA/DA]

### 4.8 传输层点对点协议

传输层协议主要介绍两个: [TCP协议](https://baike.baidu.com/item/TCP/33012)和[UDP协议](https://baike.baidu.com/item/UDP)。  
*这里学过计算机网络的同学肯定早就会了，我就简单列一下各自的特点。*

**TCP**：基于握手的、可靠的、端到端的、面向连接的字节流传输层协议
- **面向连接**，不提供广播和多播服务
- **可靠**服务，使用确认机制来检查数据是否安全、完整的到达
- 面向字节流
- 全双工

**UDP**：简便的、不可靠的、无连接传输服务，使用IP数据报携带报文
- 没有确认机制
- 不对报文排序
- 没有超时机制
- 没有反馈机制控制流量

注：用UDP不是说传输的数据就不可靠，而是基于UDP的传输需要上层的应用程序承担可靠性方面的工作

### 思考题
1. 证明水平和垂直奇偶校验中最终得到的奇偶校验码（如果是所有数的模2加）等于水平奇偶校验码的模2加，也等于垂直奇偶校验码的模2加。

	- 数学问题，将原信号写成矩阵形式做基本数字计算即可

2. 假设数据0101标志一个帧的结束，而且比特位的填充规则是在原数据串中每个010之后插入一个“0”。因此，经过填充之后，数据串010101将被转换成01001001。而且，如果帧是以01结尾的，在真实的结束数据串0101中第一个“0”之后需要填充一个“0”。根据以上的规则，说明数据串11011010010101011101是如何被填充的。接收端需要的去除位填充的规则又是什么？如何去除数据串11010001001001100101中的填充位？

	- 填充前： 11011010 010 1010 11101
	- 填充后： 1101101000100101001110100101
	- 去除规则：删除0100的最后一个0，再去掉数据尾的0101
	- 去除前：11010001001001100101
	- 去除后：11010 010 10 110 = 1101001010110

To Be Continued...